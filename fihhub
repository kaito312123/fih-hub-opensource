-- [[ CARREGAMENTO DA LIBRARY ]] --
local HttpRequest = request or http_request or http and http.request or syn and syn.request
local ModuleData = HttpRequest({Method = "GET", Url = "https://raw.githubusercontent.com/KadeTheExploiter/Machina/refs/heads/main/Module.luau"})
local GuiLibrary = loadstring(ModuleData.Body)()

-- [[ CONFIGURAÇÕES ]] --
local NOME_DA_PART = "WINPART"
local ALTURA_OFFSET = 7
local INTERVALO = 1
local tpLigado = false
local afkLigado = false

-- [[ INTERFACE MACHINA ]] --
local MainFrame, ScreenGui = GuiLibrary:Load("Bunni Hub Client", "Dark")

local Tabs = {
    Main = MainFrame:NewTabEntry("Principal", "rbxassetid://10734945662"),
    Scripts = MainFrame:NewTabEntry("Utilidades", "rbxassetid://10734944532")
}

-- [[ FUNÇÕES DE LIMPEZA ]] --
local function limparMapa()
    local count = 0
    for _, obj in pairs(game.Workspace:GetDescendants()) do
        if obj:IsA("BasePart") and (obj.Name == "KillBrick" or obj.Name == "Invis") then
            obj:Destroy()
            count = count + 1
        end
    end
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = "Limpeza Concluída",
        Text = "Removidos " .. count .. " objetos perigosos.",
        Duration = 3
    })
end

-- [[ LÓGICA DE TELEPORTE COM PULO ]] --
task.spawn(function()
    while true do
        if tpLigado then
            pcall(function()
                local target = nil
                for _, obj in pairs(game.Workspace:GetDescendants()) do
                    if obj.Name == NOME_DA_PART and obj:IsA("BasePart") then
                        target = obj
                        break
                    end
                end

                if target then
                    local char = game.Players.LocalPlayer.Character
                    local root = char and char:FindFirstChild("HumanoidRootPart")
                    local hum = char and char:FindFirstChildOfClass("Humanoid")
                    
                    if root and hum then
                        -- Força um pulo antes do TP para o jogo detectar movimento
                        hum.Jump = true
                        task.wait(0.1) -- Pequeno delay para o pulo registrar
                        
                        root.CFrame = target.CFrame * CFrame.new(0, ALTURA_OFFSET, 0)
                        root.Velocity = Vector3.new(0, 0, 0)
                    end
                end
            end)
        end
        task.wait(INTERVALO)
    end
end)

-- [[ ELEMENTOS DA UI ]] --

-- Botão de Teleporte
Tabs.Main:NewToggleEntry("Auto Farm (WinPart)", "Pula e teleporta para a vitória", false, function(state)
    tpLigado = state
end)

-- Botão Anti-AFK
Tabs.Main:NewToggleEntry("Anti-AFK", "Evita ser expulso por inatividade", false, function(state)
    afkLigado = state
end)

-- Botão de Limpar (KillBricks/Invis)
Tabs.Scripts:NewButtonEntry("Deletar KillBricks/Invis", "Remove as partes da imagem enviada", function()
    limparMapa()
end)

-- [[ LÓGICA ANTI-AFK ]] --
game.Players.LocalPlayer.Idled:Connect(function()
    if afkLigado then
        game:GetService("VirtualUser"):CaptureController()
        game:GetService("VirtualUser"):ClickButton2(Vector2.new())
    end
end)

print("nigger Client Carregado com Sucesso!")
