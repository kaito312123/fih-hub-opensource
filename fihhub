local HttpRequest = request or http_request or http and http.request or syn and syn.request
local ModuleData = HttpRequest({Method = "GET", Url = "https://raw.githubusercontent.com/KadeTheExploiter/Machina/refs/heads/main/Module.luau"})
local GuiLibrary = loadstring(ModuleData.Body)()

local NOME_DA_PART = "WINPART"
local ALTURA_OFFSET = 0
local tpLigado = false
local afkLigado = false

local MainFrame, ScreenGui = GuiLibrary:Load("Fih Hub", "Dark")

local MainTab = MainFrame:NewTabEntry("Principal", "rbxassetid://10734945662")
local ScriptsTab = MainFrame:NewTabEntry("Utilidades", "rbxassetid://10734944532")

local vitoriasLabel = MainTab:NewLabelEntry("Vitórias (Sessão): 0")

local player = game.Players.LocalPlayer
local vitoriasIniciais = 0

local function obterVitoriasAtuais()
    local stats = player:FindFirstChild("leaderstats")
    if stats then
        local w = stats:FindFirstChild("Wins") or stats:FindFirstChild("Vitorias") or stats:FindFirstChild("Vitórias")
        return w and w.Value or 0
    end
    return 0
end

vitoriasIniciais = obterVitoriasAtuais()

task.spawn(function()
    while true do
        local vAtual = obterVitoriasAtuais()
        local ganhasNessaSessao = vAtual - vitoriasIniciais
        if vitoriasLabel and vitoriasLabel.SetText then
            vitoriasLabel:SetText("Vitórias (Sessão): " .. ganhasNessaSessao)
        end
        task.wait(1)
    end
end)

local function limparMapa()
    local count = 0
    for _, obj in pairs(game.Workspace:GetDescendants()) do
        if obj:IsA("BasePart") and (obj.Name == "KillBrick" or obj.Name == "Invis") then
            obj:Destroy()
            count = count + 1
        end
    end
end

local cachedTarget = nil

task.spawn(function()
    while true do
        if tpLigado then
            pcall(function()
                if not cachedTarget or not cachedTarget.Parent then
                    for _, obj in pairs(game.Workspace:GetDescendants()) do
                        if obj.Name == NOME_DA_PART and obj:IsA("BasePart") then
                            cachedTarget = obj
                            break
                        end
                    end
                end

                if cachedTarget then
                    local char = player.Character
                    if char then
                        local root = char:FindFirstChild("HumanoidRootPart")
                        local hum = char:FindFirstChildOfClass("Humanoid")
                        
                        if root and hum and hum.Health > 0 then
                            hum.Jump = true 
                            root.CFrame = cachedTarget.CFrame * CFrame.new(0, ALTURA_OFFSET, 0)
                            root.Velocity = Vector3.new(0, 0, 0)
                        end
                    end
                end
            end)
            task.wait(0.1)
        else
            task.wait(0.5)
        end
    end
end)

MainTab:NewToggleEntry("Auto Farm (WinPart)", "Pula e teleporta para a vitória", false, function(state)
    tpLigado = state
    if not state then
        cachedTarget = nil
    end
end)

MainTab:NewToggleEntry("Anti-AFK", "Evita ser expulso por inatividade", false, function(state)
    afkLigado = state
end)

ScriptsTab:NewButtonEntry("Deletar KillBricks/Invis", "Remove as partes perigosas", function()
    limparMapa()
end)

game.Players.LocalPlayer.Idled:Connect(function()
    if afkLigado then
        game:GetService("VirtualUser"):CaptureController()
        game:GetService("VirtualUser"):ClickButton2(Vector2.new())
    end
end)

print("Fih Hub Carregado!")
